				RBOOK
		      ПРОГРАММА ДЛЯ ЧТЕНИЯ КНИГ

Программа Rbook работает в среде Emacs и позволяет читать книги,
представленные в электронном виде, при помощи синтезатора речи,
обеспечивая возможность немедленного останова процесса чтения с
последующим его возобновлением и использование механизма закладок.

Первоначальный вариант этой программы принадлежит перу Дмитрия
Падучих, за что, пользуясь случаем, хочу выразить ему глубочайшую
благодарность. Я лишь несколько модифицировал ее, оснастив
возможностью создания аудиокниг в MP3-формате, пригодных для
прослушивания при помощи портативного плеера.


			      УСТАНОВКА

Архив с rbook следует распаковать в одной из директорий, в которой Emacs
ищет свои библиотеки. Например, /usr/local/share/emacs/site-lisp. После
загрузки Emacs путь к директории, содержащей файлы rbook, должен появиться в
переменной load-path.

В принципе, с распакованными файлами ничего больше делать не нужно. Но при
необходимости перекомпилировать файл rbook.elc это можно сделать, выбрав его
курсором в dired и нажав B (команда dired-do-byte-compile). Остальные файлы
(speak, mp3, play и т.д.) никуда перемещать не надо, они должны находиться в
той же директории, что и лисповский модуль rbook, загружаемый Emacs'ом.

В файл ~/.emacs впишите следующий текст:

(load "rbook-init" t)

В скриптах speak и play для проигрывания звука используется программа aplay,
которая идёт вместе с ALSA. Убедитесь, что она у вас установлена (пакет
alsa-utils в Debian/Ubuntu). Следует также проверить путь к словарю ударений
ru_tts, заданный в опции rbook-pronunciation-dictionary. По умолчанию
считается, что словарь ударений находится в файле
/usr/local/share/ru_tts/lexicon. Если это не так, то отредактируйте значение
rbook-pronunciation-dictionary командой Emacs:

M-x customize-option RET rbook-pronunciation-dictionary RET


ИСПОЛЬЗОВАНИЕ

Для чтения книг вслух при помощи речевого синтезатора служат следующие
два обращения:

`C-c r' (rbook-read-here) -- Читать текст в текущем буфере с текущей
позиции.

`C-c b' (rbook-read-from-bookmark) -- Читать текст, начиная от закладки. По
умолчанию используется закладка `book', однако, если вызывать эту
функцию с префиксным аргументом, то можно явно задать имя закладки.

Процесс чтения может быть мгновенно прерван в любой момент посредством
стандартной комбинации `C-g'. При этом курсор устанавливается на
начало того предложения, чтение которого было столь грубо прервано. В
случае чтения с закладки в это же место будет переложена и
закладка. Таким образом, при последующем использовании описанных
обращений чтение может быть продолжено.

Примечание. Rbook использует входящий в состав Emacs механизм закладок
(`bookmark'), детально описанный в документации на Emacs, потому
останавливаться на нем здесь подробно не вижу смысла.

Комбинация клавиш `C-c c' (rbook-customize) вызывает панель настройки,
при помощи которой можно установить целый ряд параметров программы,
таких как, например, скорость речи, тембр и громкость голоса и многое
другое.

Нажатие `C-c a' (rbook-make-audio-book) запускает процесс изготовление
аудиокниги из текста, содержащегося в текущем буфере. Чтение
начинается с текущей позиции курсора. Процесс этот сопровождается
перемещением курсора по тексту и периодической выдачей сообщений о
времени звучания обработанного текста. Процесс завершается по
достижении конца буфера или может быть остановлен насильно путем
уничтожения буфера с текстом. В последнем случае прекращение процесса
происходит не мгновенно, так как текущее предложение дочитывается
обязательно. По окончании процесса изготовления аудиокниги выдается
сообщение о времени ее звучания и о суммарном объеме файлов.

Время звучания обработанного текста можно получить и по желанию в
любой момент при помощи комбинации `C-c t' (rbook-show-time).

Для успешного создания аудиокниг желательно чтобы исходный текст
удовлетворял следующим условиям:

1) Заголовки должны отделяться от основного текста пустыми строками.

2) Абзацы должны отделяться друг от друга пустыми строками.

3) В тексте не должно быть многоточий внутри слов. Если же таковые
   встречаются, то справа от многоточия в таких местах следует
   вставить пробел.

При изготовлении аудиокниг часто бывает целесообразно разбивать их на
куски по тем или иным критериям, вместо того, чтобы создавать единый
большой файл. Rbook располагает достаточно гибким механизмом такой
разбивки, позволяющий ориентироваться как на логику текста, так и на
время звучания отдельных файлов. Однако, независимо от критерия,
разбиение всегда происходит на границе абзацев.


					Порецкий Игорь
					<poretsky@mlbox.ru>
